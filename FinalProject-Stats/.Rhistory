str(video_df)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(scales)
library(infer)
library(psych)
library(httr)
library(jsonlite)
library(here)
#Get the videos csv
raw_video_df <- read_csv(file="https://raw.githubusercontent.com/georg4re/ds606/main/data/USvideos.csv",quote = "\"")
#get the categories JSON
url <- paste("https://raw.githubusercontent.com/georg4re/ds606/main/data/US_category_id.json", sep="")
res <- GET(url)
data <- fromJSON(rawToChar(res$content))
category_df <- data$items %>%
flatten(.) %>%
rename(category=snippet.title)
category_df <- category_df %>%
rename(category_id = id)
category_df$category_id <- as.numeric(category_df$category_id)
video_df <- raw_video_df %>%
left_join(category_df) %>%
select(video_id,
trending_date,
title,
channel_title,
category,
publish_time,
tags,
views,
likes,
dislikes,
comment_count,
comments_disabled,
ratings_disabled,
video_error_or_removed,
description
)
str(video_df)
video_categories <- video_df %>%
group_by(category) %>%
summarise(
views_sum = sum(views),
likes_sum = sum(likes),
dislikes_sum = sum(dislikes)) %>%
arrange(desc(views_sum))
knitr::kable(video_categories)
ggplot(video_categories, aes(factor(category), likes_sum, fill = category)) +
geom_bar(stat="identity", position = "dodge") +
scale_fill_brewer(palette = "Set1") +
theme(axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank())
ggplot(video_categories, aes(y=factor(category), x=likes_sum, fill = category)) +
geom_bar(stat="identity", position = "dodge") +
scale_fill_brewer(palette = "Set1") +
theme(axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank())
ggplot(video_categories, aes(y=reorder(factor(category), likes_sum), x=likes_sum, fill = category)) +
geom_bar(stat="identity", position = "dodge") +
scale_fill_brewer(palette = "Set1") +
theme(axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank())
View(video_categories)
